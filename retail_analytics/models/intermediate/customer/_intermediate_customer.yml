version: 2
models:
  - name: int_customer_lifetime_value
    description: "Metrics clients : total_orders, lifetime_value, avg_order_value, tenure"
    columns:
      - name: customer_id
        tests:
          - not_null
          - unique
      - name: total_orders
        tests:
          - not_null
          - test_positive_values
      - name: lifetime_value
        tests:
          - not_null
          - test_positive_values
      - name: avg_order_value
        tests:
          - not_null
          - test_positive_values
      - name: customer_tenure_days
        tests:
          - not_null
          - test_positive_values

  - name: int_customers_orders
    description: "Jointure clients x commandes"
    columns:
      - name: customer_id
        tests:
          - not_null
      - name: order_id
        tests:
          - unique
          - test_no_duplicate_orders
      - name: total_amount
        tests:
          - test_positive_values
      - name: net_amount
        tests:
          - not_null
          - test_positive_values

  - name: int_campaign_attributed_orders
    description: "Commandes attribu√©es aux campagnes marketing"
    columns:
      - name: order_id
        tests:
          - not_null
          - test_no_duplicate_orders
      - name: net_amount
        tests:
          - not_null
          - test_positive_values
      - name: cost_attribution
        tests:
          - test_positive_values
    
  - name: int_product_performance
    description: "Performance des produits vendus"
    columns:
      - name: product_id
        tests:
          - unique
          - not_null
      - name: total_revenue
        tests:
          - not_null
          - test_positive_values
      - name: total_profit
        tests:
          - not_null

  - name: int_customer_first_purchase
    description: "Date du premier achat par client"
    columns:
      - name: customer_id
        tests:
          - not_null
          - unique
      - name: first_order_date
        tests:
          - not_null